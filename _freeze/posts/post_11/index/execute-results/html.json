{
  "hash": "6603c9b31670235c7a00b669bc62ddb1",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"TCMB Başkan Yardımcısı Cevdet Akçay'ın 'Link Kopmuş' Dediği Konuşmasının Duygu Analizi\"\nauthor: \"Uraz Akgül\"\ndate: \"2024-04-25\"\n# date-modified: last-modified\ndate-format: \"MMMM D, YYYY\"\ncategories: [Yüz, Duygu Analizi, Merkez Bankası]\nimage: \"imgs/img_3.png\"\nexecute:\n  eval: false\n---\n\nTürkiye Cumhuriyet Merkez Bankası Başkan Yardımcısı Cevdet Akçay, 2024 yılının ilk Enflasyon Raporu bilgilendirme toplantısında şunları aktarmıştı:\n\n*İçinde çalıştığımız setting'de, ağırlıklı ortalama fonlama maliyeti mevduat faizi linki kopmuş, politika faizi enflasyon linki kopmuş, faiz kur linki kopmuş...*\n\nKonuşmasına şöyle devam etmişti:\n\n*Biz yedi aydır bu kopan linkleri tekrar ihdas ediyoruz. Bu linkler tekrar ihdas edilecek. Veriler birikecek. Alan verileri kullanacaksınız, modelleme yapacaksınız. Oradan da 36'dan 38'e çıkma ihtiyacı, çok zor. Modelleme iyi bilen arkadaşlar bu dediğimi çok iyi anlayacaktır. Çok zor değil imkansıza yakın.*\n\nPeki, bu konuşma sırasında Akçay'ın yüzünde hangi duygular oluştu?\n\nX (Twitter) profil fotoğraflarını veri seti olarak kullandığımız [*İstanbul İlçe Belediye Başkanlarının X (Twitter) Profillerindeki Duygu Dağılımı*](https://urazakgul.github.io/python-blog/posts/post_6/){.external target=\"_blank\"} başlıklı çalışmada `Py-Feat` kütüphanesinden faydalanmıştık. Video üzerinden analiz yapacağımız bu çalışmada yine `Py-Feat` kütüphanesinden faydalanacağız. Kütüphane ile ilgili detaylı bilgi için ilgili çalışma incelenebilir. Çalışmada kullanacağımız video ise Youtube'dan indirilebilir.\n\n**Kullanılacak Kütüphaneler**\n\n::: {#a43b791b .cell execution_count=1}\n``` {.python .cell-code}\nimport os\nfrom feat import Detector\nimport matplotlib.pyplot as plt\n```\n:::\n\n\n**Video, Frame ve FPS Kavramlarının Tanımlanması**\n\nBir video temel olarak bir dizi fotoğrafın belirli bir hızda birbirini takip ederek oynatılmasıdır. Her bir fotoğraf karesine frame deniliyor. FPS (Frames Per Second) ise saniyedeki kare ya da frame sayısıdır. Detaylı öğrenmek isteyenler için [şuradaki](https://www.youtube.com/watch?v=BvnzxqVcZ0g){.external target=\"_blank\"} videoyu tavsiye edebilirim.\n\n**Videonun İçe Aktarılması**\n\n`cbrt_cevdet_akcay.mp4` isimli video içinde bulunduğumuz dizindedir.\n\n::: {#3448953d .cell execution_count=2}\n``` {.python .cell-code}\ncurrent_dir = os.getcwd()\nvideo_path = os.path.join(current_dir, 'cbrt_cevdet_akcay.mp4')\n```\n:::\n\n\n**Duyguların Tespit Edilmesi ve Görselleştirilmesi**\n\n::: {#571c6168 .cell execution_count=3}\n``` {.python .cell-code}\ndetector = Detector(\n    face_model='retinaface',\n    landmark_model='mobilefacenet',\n    au_model='xgb',\n    emotion_model='resmasknet',\n    facepose_model='img2pose',\n    identity_model='facenet'\n)\n\nvideo_prediction = detector.detect_video(video_path, skip_frames=24)\nprint(video_prediction.head())\n```\n:::\n\n\n`skip_frames` parametresi video üzerindeki karelerin işlenmesinde atlanacak kare sayısını belirtir. Bir video genellikle saniyede çok sayıda kare içerir ve bu kareler arasında önemli ölçüde benzerlik olabilir. Özellikle video çok yüksek çözünürlüklü veya uzunsa her kareyi işlemek oldukça yoğun bir hesaplama gerektirebilir. Ancak bazı uygulamalarda her kareyi işlemek gerekli olmayabilir. Bu durumda, `skip_frames` kullanılabilir. `skip_frames` parametresi, belirli sayıda kareyi atlayarak işlem süresini azaltır. Örneğin, `skip_frames=24` ile her 24. kareye işlem yapılır.\n\n![](imgs/img_1.png)\n\nDuygular aşağıdaki gibi çekilebilir.\n\n::: {#facca04a .cell execution_count=4}\n``` {.python .cell-code}\nakcay_emotions = video_prediction.emotions\nprint(akcay_emotions.head())\n```\n:::\n\n\n![](imgs/img_2.png)\n\nDuyguları görselleştirelim.\n\n::: {#bf92b9be .cell execution_count=5}\n``` {.python .cell-code}\nfig, axes = plt.subplots(nrows=7, ncols=1, figsize=(10, 20))\nfor i, (emotion, color) in enumerate(zip(akcay_emotions.columns, ['r', 'g', 'b', 'c', 'm', 'y', 'k'])):\n    ax = akcay_emotions.plot(y=emotion, ax=axes[i], color=color, legend=False)\n    ax.set_ylabel(emotion.capitalize())\n\naxes[0].set_title(\"TCMB Başkan Yardımcısı Cevdet Akçay'ın 'Link Kopmuş' Dediği Konuşmasındaki Duygular\", fontsize=14)\nplt.tight_layout()\nplt.show()\n```\n:::\n\n\n![](imgs/img_3.png)\n\nHer karede hangi duygunun daha yüksek olduğuna bakalım.\n\n::: {#10dcbbc0 .cell execution_count=6}\n``` {.python .cell-code}\nmax_emotion_per_row = akcay_emotions.idxmax(axis=1)\nemotion_distribution = max_emotion_per_row.value_counts(normalize=True) * 100\n\nplt.figure(figsize=(10, 6))\nemotion_distribution.plot(kind='bar', color='skyblue')\nplt.title('Her Karede En Yüksek Duygu Kategorisinin Dağılımı')\nplt.xlabel('Duygu Kategorisi')\nplt.ylabel('Yüzde (%)')\nplt.xticks(rotation=0)\nplt.grid(axis='y', linestyle='--', alpha=0.7)\nplt.tight_layout()\nplt.show()\n```\n:::\n\n\n![](imgs/img_4.png)\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}